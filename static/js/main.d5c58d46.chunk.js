(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},325:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(108),s=n.n(i),o=(n(117),n(118),n(8)),l=n.n(o),u=n(20),d=n(17),b=n(7),h=n(2),j=n(1);!function(e){e.batteryCharging="BatteryCharging",e.batteryDischarging="BatteryDischarging",e.batteryLevel="BatteryLevel",e.Lights="Lights",e.temperature="Temperature",e.humidity="Humidity"}(a||(a={}));var p,m=function(e,t){switch(t.type){case a.batteryCharging:return Object(h.a)(Object(h.a)({},e),{},{battery:Object(h.a)(Object(h.a)({},e.battery),{},{batteryCharging:t.paload})});case a.batteryDischarging:return Object(h.a)(Object(h.a)({},e),{},{battery:Object(h.a)(Object(h.a)({},e.battery),{},{BatteryDischarging:t.paload})});case a.batteryLevel:return Object(h.a)(Object(h.a)({},e),{},{battery:Object(h.a)(Object(h.a)({},e.battery),{},{batteryLevel:t.paload})});case a.Lights:return Object(h.a)(Object(h.a)({},e),{},{heartRate:t.paload});case a.humidity:return Object(h.a)(Object(h.a)({},e),{},{environmentalSensing:Object(h.a)(Object(h.a)({},e.environmentalSensing),{},{humidity:t.paload})});case a.temperature:return Object(h.a)(Object(h.a)({},e),{},{environmentalSensing:Object(h.a)(Object(h.a)({},e.environmentalSensing),{},{temperature:t.paload})});default:return e}},g=Object(r.createContext)({valueState:{},valueDispatch:function(){return null}});!function(e){e.AvailabilityChanged="AvailabilityChanged",e.Connecting="Connecting",e.Connected="Connected",e.Disconnect="Disconnect",e.FailedToConnect="FailedToConnect"}(p||(p={}));var v=function(e,t){switch(t.type){case p.AvailabilityChanged:return Object(h.a)(Object(h.a)({},e),{},{data:{isAvailable:t.payload}});case p.Connecting:return Object(h.a)(Object(h.a)({},e),{},{data:Object(h.a)(Object(h.a)({},e.data),{},{connecting:!0,failed:!1})});case p.FailedToConnect:return Object(h.a)(Object(h.a)({},e),{},{data:Object(h.a)(Object(h.a)({},e.data),{},{connecting:!1,failed:!0})});case p.Connected:return Object(h.a)(Object(h.a)({},e),{},{ble:t.payload,data:Object(h.a)(Object(h.a)({},e.data),{},{isConnected:!0,connecting:!1,failed:!1})});case p.Disconnect:return{data:Object(h.a)(Object(h.a)({},e.data),{},{isConnected:!1,failed:!1}),ble:{}};default:return e}},O=Object(r.createContext)({BLEstate:{data:{},ble:{}},BLEdispatch:function(){return null}}),f=Object(r.createContext)({Connect:function(){return null},Disconnect:function(){return null}}),x=Object(r.createContext)({});var y=function(e){var t=e.children,n=!!navigator.bluetooth,c=Object(r.useReducer)(v,{data:{},ble:{}}),i=Object(b.a)(c,2),s=i[0],o=i[1],y=s.data,C=y.isConnected,L=y.connecting,k=y.isAvailable,w=Object(r.useReducer)(m,{}),M=Object(b.a)(w,2),N=M[0],A=M[1],H=Object(r.useState)({services:[],characteristics:[]}),S=Object(b.a)(H,2),D=S[0],V=S[1],F=Object(r.useState)(),E=Object(b.a)(F,2),B=E[0],R=E[1];function T(e){o({type:p.AvailabilityChanged,payload:e.target})}function _(){return(_=Object(d.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&!C&&!L){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,o({type:p.Connecting}),e.next=6,navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["battery_service","4fafc201-1fb5-459e-8fcc-c5c9c331914b","environmental_sensing"]});case 6:if((t=e.sent).addEventListener("gattserverdisconnected",I),t.gatt){e.next=11;break}return o({type:p.Disconnect}),e.abrupt("return");case 11:return e.next=13,t.gatt.connect();case 13:n=e.sent,o({type:p.Connected,payload:{server:n,device:t}}),e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(2),o({type:p.FailedToConnect}),e.abrupt("return");case 21:return e.prev=21,e.next=24,n.getPrimaryServices();case 24:a=e.sent,V((function(e){return Object(h.a)(Object(h.a)({},e),{},{services:a})})),a.forEach(function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,224*n)}));case 2:return console.trace(),e.next=5,t.getCharacteristics();case 5:r=e.sent,V((function(e){return Object(h.a)(Object(h.a)({},e),{},{characteristics:[].concat(Object(u.a)(e.characteristics),Object(u.a)(r))})})),console.log(r),r.forEach(function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,r),"beb5483e-36e1-4688-b7f5-ea07361b26a8"!==t.uuid){e.next=4;break}return R(t),e.abrupt("return");case 4:if(!t.properties.notify){e.next=21;break}return console.time(t.uuid),e.next=8,new Promise((function(e){return setTimeout(e,1654*n)}));case 8:return console.timeEnd(t.uuid),e.prev=9,e.next=12,t.startNotifications();case 12:console.error("HEllo"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.error(e.t0,t.uuid);case 18:t.addEventListener("characteristicvaluechanged",U),e.next=22;break;case 21:t.addEventListener("characteristicvaluechanged",U);case 22:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=31;break;case 29:e.prev=29,e.t1=e.catch(21);case 31:console.log(N);case 32:case"end":return e.stop()}}),e,null,[[2,17],[21,29]])})))).apply(this,arguments)}function U(e){var t=e.target;if(t.value){var n=t.value;switch(t.uuid){case"00002a6e-0000-1000-8000-00805f9b34fb":var r=n.getUint8(0)+256*n.getUint8(1);A({type:a.temperature,paload:r/100});break;case"00002a6f-0000-1000-8000-00805f9b34fb":var c=n.getUint8(0)+256*n.getUint8(1);A({type:a.humidity,paload:c/100});break;case"00002a19-0000-1000-8000-00805f9b34fb":var i=n.getUint8(0)+256*n.getUint8(1);console.log(i),A({type:a.batteryLevel,paload:i});break;case"00002a1a-0000-1000-8000-00805f9b34fb":break;case"beb5483e-36e1-4688-b7f5-ea07361b26a8":var s={red:21,blue:10,green:14};A({type:a.Lights,paload:s})}}}function P(){return(P=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,null===(t=s.ble.server)||void 0===t?void 0:t.disconnect();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function I(e){D.characteristics.forEach((function(e){e.removeEventListener("characteristicvaluechanged",U)})),V({characteristics:[],services:[]}),console.log(e.target),o({type:p.Disconnect}),R(void 0)}return Object(r.useEffect)((function(){var e,t;return null===(e=navigator.bluetooth)||void 0===e||e.getAvailability().then((function(e){o({type:p.AvailabilityChanged,payload:e}),console.log("One time av ".concat(e))})),null===(t=navigator.bluetooth)||void 0===t||t.addEventListener("availabilitychanged",T),function(){var e;null===(e=navigator.bluetooth)||void 0===e||e.removeEventListener("availabilitychanged",T)}}),[]),Object(j.jsx)(j.Fragment,{children:n?Object(j.jsx)(O.Provider,{value:{BLEstate:s,BLEdispatch:o},children:Object(j.jsx)(f.Provider,{value:{Connect:function(){return _.apply(this,arguments)},Disconnect:function(){return P.apply(this,arguments)}},children:Object(j.jsx)(g.Provider,{value:{valueState:N,valueDispatch:A},children:Object(j.jsx)(x.Provider,{value:{lightChar:B},children:t})})})}):Object(j.jsx)("div",{children:" No Bluetooth Detected"})})},C=(n(39),n(109)),L=n.n(C),k=function(){return Object(j.jsxs)("article",{className:"main__wrapper",children:[Object(j.jsx)("h1",{className:"sm:text-lg sm:leading-snug font-semibold tracking-wide uppercase  mb-3",children:"Matruski rad:"}),Object(j.jsxs)("p",{className:" text-3xl sm:text-5xl lg:text-6xl leading-none font-extrabold text-gray-900 tracking-tight mb-8",children:["Web tehnologije i ",Object(j.jsx)("br",{})," mikrokontroleri"]}),Object(j.jsx)("p",{className:"mt-2 ",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aperiam repellat, excepturi possimus, voluptas iusto."}),Object(j.jsxs)("div",{className:"mt-80 grid grid-cols-2",children:[Object(j.jsxs)("p",{className:" leading-none",children:["U\u010denik:",Object(j.jsx)("br",{}),Object(j.jsx)("span",{className:"font-semibold text-lg",children:"Jovica Veljkovi\u0107"})]}),Object(j.jsxs)("p",{className:" leading-none  ",children:["Profesor:",Object(j.jsx)("br",{}),Object(j.jsx)("span",{className:"font-semibold text-lg",children:"Radica Aleksandrov "})]})]}),Object(j.jsx)("div",{className:"markdown-body",children:Object(j.jsx)(L.a,{children:"\n# A demo of `react-markdown`\n\n`react-markdown` is a markdown component for React.\n\n\ud83d\udc49 Changes are re-rendered as you type.\n\n\ud83d\udc48 Try writing some markdown on the left.\n\n## Overview\n\n* Follows [CommonMark](https://commonmark.org)\n\n* Optionally follows [GitHub Flavored Markdown](https://github.github.com/gfm/)\n\n* Renders actual React elements instead of using `dangerouslySetInnerHTML`\n\n* Lets you define your own components (to render `MyHeading` instead of `h1`)\n\n* Has a lot of plugins\n\n## Table of contents\n\nHere is an example of a plugin in action\n\n([`remark-toc`](https://github.com/remarkjs/remark-toc)).\n\nThis section is replaced by an actual table of contents.\n\n## Syntax highlighting\n\nHere is an example of a plugin to highlight code:\n\n[`rehype-highlight`](https://github.com/rehypejs/rehype-highlight).\n\n```js\n\nimport React from 'react'\n\nimport ReactDOM from 'react-dom'\n\nimport Markdown from 'react-markdown'\n\nimport rehypeHighlight from 'rehype-highlight'\n\nReactDOM.render(\n  <Markdown rehypePlugins={[rehypeHighlight]}>{'# Your markdown here'}</Markdown>,\n  document.querySelector('#content')\n)\n```\n\nPretty neat, eh?\n## GitHub flavored markdown (GFM)\nFor GFM, you can *also* use a plugin:\n[`remark-gfm`](https://github.com/remarkjs/react-markdown#use).\nIt adds support for GitHub-specific extensions to the language:\ntables, strikethrough, tasklists, and literal URLs.\nThese features **do not work by default**.\n\n\ud83d\udc46 Use the toggle above to add the plugin.\n| Feature    | Support              |\n| ---------: | :------------------- |\n| CommonMark | 100%                 |\n| GFM        | 100% w/ `remark-gfm` |\n\n~~strikethrough~~\n\n* [ ] task list\n\n* [x] checked item\n\nhttps://example.com\n\n## HTML in markdown\n\n\u26a0\ufe0f HTML in markdown is quite unsafe, but if you want to support it, you can\n\nuse [`rehype-raw`](https://github.com/rehypejs/rehype-raw).\n\n\nYou should probably combine it with\n\n[`rehype-sanitize`](https://github.com/rehypejs/rehype-sanitize).\n\n<blockquote>\n\n\ud83d\udc46 Use the toggle above to add the plugin.\n\n</blockquote>\n\n## Components\n\nYou can pass components to change things:\n\n```js\nimport React from 'react'\n\nimport ReactDOM from 'react-dom'\n\n\nimport Markdown from 'react-markdown'\nimport MyFancyRule from './components/my-fancy-rule.js'\n\n\nReactDOM.render(\n\n  <Markdown\n\n  components={{\n\n    // Use h2s instead of h1s\n\n    h1: 'h2',\n\n    // Use a component instead of hrs\n\n    hr: ({node, ...props}) => <MyFancyRule {...props} />\n\n  }}\n\n  >\n\n  # Your markdown here\n\n  </Markdown>,\n  document.querySelector('#content')\n\n  )\n\n\n  ```\n\n  ## More info?\n\n  Much more info is available in the\n\n  [readme on GitHub](https://github.com/remarkjs/react-markdown)!\n\n  ***\n\nA component by [Espen Hovlandsdal](https://espen.codes/)"})})]})},w=n(111),M=function(){var e,t=Object(r.useContext)(g).valueState,n=Object(r.useState)({labels:["start"],datasets:[{label:"% Battery",data:[0],fill:!1,backgroundColor:"hsl(189, 60%, 70%)",borderColor:"hsla(182, 100%, 56%, 0.2)"}]}),a=Object(b.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){i((function(e){var n,a,r,c;(null===(n=e.datasets)||void 0===n?void 0:n[0].data)&&((a=null===(r=e.datasets)||void 0===r?void 0:r[0].data).length>150&&(e.labels.shift(),a.shift()),e.labels=[].concat(Object(u.a)(e.labels),[(new Date).toISOString().slice(17,22)]),a=[].concat(Object(u.a)(a),[null===(c=t.battery)||void 0===c?void 0:c.batteryLevel]),e.datasets[0].data=a,e=Object(h.a)({},e));return e}))}),[null===(e=t.battery)||void 0===e?void 0:e.batteryLevel]),Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("svg",{className:"h-6 w-6 mx-auto",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{fill:"currentColor",d:"M9,2V4H7.33A1.33,1.33 0 0,0 6,5.33V20.67C6,21.4 6.6,22 7.33,22H16.67A1.33,1.33 0 0,0 18,20.67V5.33C18,4.6 17.4,4 16.67,4H15V2H9M11.83,8H12.33L15.18,10.85L13.04,13L15.17,15.14L12.33,18H11.83V14.21L9.54,16.5L8.83,15.79L11.62,13L8.83,10.21L9.54,9.5L11.83,11.79V8M12.83,9.91V11.79L13.77,10.85L12.83,9.91M12.83,14.21V16.08L13.77,15.14L12.83,14.21Z"})}),Object(j.jsx)("span",{children:"Battery"}),Object(j.jsx)("div",{className:"chart",children:Object(j.jsx)(w.Line,{data:c,options:{maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{ticks:{min:0,max:100,beginAtZero:!0},gridLines:{borderDash:[10,5]}}]}}})})]})},N=function(){var e,t,n=Object(r.useContext)(g).valueState;return Object(j.jsx)("div",{className:"",children:Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("svg",{className:"h-6 w-6 mx-auto",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{fill:"currentColor",d:"M15 13V5A3 3 0 0 0 9 5V13A5 5 0 1 0 15 13M12 4A1 1 0 0 1 13 5V8H11V5A1 1 0 0 1 12 4Z"})}),Object(j.jsx)("span",{children:"Temperature"}),Object(j.jsxs)("span",{children:["H:",null===(e=n.environmentalSensing)||void 0===e?void 0:e.humidity]}),Object(j.jsxs)("span",{children:["T:",null===(t=n.environmentalSensing)||void 0===t?void 0:t.temperature]})]})})},A=n(112),H=function(){var e=Object(r.useState)({r:0,g:0,b:0}),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useContext)(x).lightChar,i=Object(r.useRef)(!1),s=Object(r.useRef)({r:0,g:0,b:0}),o=Object(r.useRef)(!1),u=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),void 0!==c&&!i.current){e.next=5;break}return console.log("skip update"),o.current=!0,e.abrupt("return");case 5:return i.current=!0,e.next=8,null===c||void 0===c?void 0:c.writeValue(new Uint8Array([s.current.r,s.current.g,s.current.b]));case 8:return e.next=10,null===c||void 0===c?void 0:c.writeValue(new Uint8Array([s.current.r,s.current.g,s.current.b]));case 10:i.current=!1;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){u()}),[n]),Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("svg",{className:"h-6 w-6 mx-auto",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{fill:"currentColor",d:"M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z"})}),Object(j.jsx)("span",{children:"Light"}),Object(j.jsxs)("div",{className:"picker",children:[Object(j.jsx)("button",{tabIndex:0,className:"swatch",style:{backgroundColor:"rgb(".concat(s.current.r,",").concat(s.current.g,",").concat(s.current.b,")")}}),Object(j.jsx)("div",{className:"popover",children:Object(j.jsx)(A.a,{color:n,onChange:function(e){a(e),s.current=e}})})]})]})},S=function(){var e=[Object(r.useContext)(f).Connect],t=Object(b.a)(e,1)[0],n=[Object(r.useContext)(f).Disconnect],a=Object(b.a)(n,1)[0],c=function(){var e=Object(r.useContext)(O).BLEstate,t=e.ble.device,n=e.data;return{isAvailable:n.isAvailable,isConnected:n.isConnected,connecting:n.connecting,failed:n.failed,device:t}}(),i=c.failed,s=c.device,o=c.isConnected;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"aside__top-nav",children:[Object(j.jsx)("button",{className:"aside__open-button",children:Object(j.jsx)("svg",{className:"w-6 h-6 text-gray-800 mx-auto",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{fill:"currentColor",d:"M14.88,16.29L13,18.17V14.41M13,5.83L14.88,7.71L13,9.58M17.71,7.71L12,2H11V9.58L6.41,5L5,6.41L10.59,12L5,17.58L6.41,19L11,14.41V22H12L17.71,16.29L13.41,12L17.71,7.71Z"})})}),Object(j.jsx)("button",{className:"aside__close-button",tabIndex:-1,disabled:!0,children:Object(j.jsx)("svg",{className:"w-6 h-6 text-gray-800 mx-auto",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})})]}),Object(j.jsxs)("div",{tabIndex:0,className:"aside__wrapper",children:[Object(j.jsx)("div",{className:" aside__buttons ",children:o?Object(j.jsxs)("button",{className:"",onClick:a,children:["Disconnect",Object(j.jsx)("p",{className:"text-sm font-normal",children:null===s||void 0===s?void 0:s.name})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("button",{className:"",onClick:t,children:[Object(j.jsx)("svg",{className:"w-6 h-6 text-gray-800 mx-auto",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{fill:"currentColor",d:"M12 7.5C12.69 7.5 13.27 7.73 13.76 8.2S14.5 9.27 14.5 10C14.5 11.05 14 11.81 13 12.28V21H11V12.28C10 11.81 9.5 11.05 9.5 10C9.5 9.27 9.76 8.67 10.24 8.2S11.31 7.5 12 7.5M16.69 5.3C17.94 6.55 18.61 8.11 18.7 10C18.7 11.8 18.03 13.38 16.69 14.72L15.5 13.5C16.5 12.59 17 11.42 17 10C17 8.67 16.5 7.5 15.5 6.5L16.69 5.3M6.09 4.08C4.5 5.67 3.7 7.64 3.7 10S4.5 14.3 6.09 15.89L4.92 17.11C3 15.08 2 12.7 2 10C2 7.3 3 4.94 4.92 2.91L6.09 4.08M19.08 2.91C21 4.94 22 7.3 22 10C22 12.8 21 15.17 19.08 17.11L17.91 15.89C19.5 14.3 20.3 12.33 20.3 10S19.5 5.67 17.91 4.08L19.08 2.91M7.31 5.3L8.5 6.5C7.5 7.42 7 8.58 7 10C7 11.33 7.5 12.5 8.5 13.5L7.31 14.72C5.97 13.38 5.3 11.8 5.3 10C5.3 8.2 5.97 6.64 7.31 5.3Z"})}),"Connect"]}),i&&Object(j.jsx)("p",{className:"text-sm w-full sm: p-2 rounded-3xl  bg-red-200 ",children:"Faild to connect"})]})}),o&&Object(j.jsxs)("div",{className:" aside__info ",children:[Object(j.jsx)(N,{}),Object(j.jsx)(H,{}),Object(j.jsx)(M,{})]})]})]})};var D=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"title-bar"}),Object(j.jsxs)("div",{className:"layout-grid container",children:[Object(j.jsx)("main",{className:"main",children:Object(j.jsx)(k,{})}),Object(j.jsx)("aside",{className:"aside",children:Object(j.jsx)(y,{children:Object(j.jsx)(S,{})})})]})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,326)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(D,{})}),document.getElementById("root")),V()}},[[325,1,2]]]);
//# sourceMappingURL=main.d5c58d46.chunk.js.map